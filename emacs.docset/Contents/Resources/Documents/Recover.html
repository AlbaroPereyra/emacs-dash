<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:webmasters@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Recover - GNU Emacs Manual</title>
<style type="text/css">
@import url('/style.css');
</style>
<!--
This is the `GNU Emacs Manual',
updated for Emacs version 24.3.

Copyright (C) 1985--1987, 1993--2013 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``The GNU
     Manifesto,'' ``Distribution'' and ``GNU GENERAL PUBLIC LICENSE,''
     with the Front-Cover texts being ``A GNU Manual,'' and with the
     Back-Cover Texts as in (a) below.  A copy of the license is
     included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Recover"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Auto-Save-Control.html#Auto-Save-Control">Auto Save Control</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Auto-Save.html#Auto-Save">Auto Save</a>

</div>

<h4 class="subsection">18.6.3 Recovering Data from Auto-Saves</h4>

<p><a name="index-recover_002dfile-1085"></a>  You can use the contents of an auto-save file to recover from a loss
of data with the command <kbd>M-x recover-file &lt;RET&gt; </kbd><var>file</var><kbd>
&lt;RET&gt;</kbd>.  This visits <var>file</var> and then (after your confirmation)
restores the contents from its auto-save file <samp><span class="file">#</span><var>file</var><span class="file">#</span></samp>. 
You can then save with <kbd>C-x C-s</kbd> to put the recovered text into
<var>file</var> itself.  For example, to recover file <samp><span class="file">foo.c</span></samp> from its
auto-save file <samp><span class="file">#foo.c#</span></samp>, do:

<pre class="example">     M-x recover-file &lt;RET&gt; foo.c &lt;RET&gt;
     yes &lt;RET&gt;
     C-x C-s
</pre>
   <p>Before asking for confirmation, <kbd>M-x recover-file</kbd> displays a
directory listing describing the specified file and the auto-save file,
so you can compare their sizes and dates.  If the auto-save file
is older, <kbd>M-x recover-file</kbd> does not offer to read it.

   <p><a name="index-recover_002dsession-1086"></a>  If Emacs or the computer crashes, you can recover all the files you
were editing from their auto save files with the command <kbd>M-x
recover-session</kbd>.  This first shows you a list of recorded interrupted
sessions.  Move point to the one you choose, and type <kbd>C-c C-c</kbd>.

   <p>Then <code>recover-session</code> asks about each of the files that were
being edited during that session, asking whether to recover that file. 
If you answer <kbd>y</kbd>, it calls <code>recover-file</code>, which works in its
normal fashion.  It shows the dates of the original file and its
auto-save file, and asks once again whether to recover that file.

   <p>When <code>recover-session</code> is done, the files you've chosen to
recover are present in Emacs buffers.  You should then save them.  Only
this&mdash;saving them&mdash;updates the files themselves.

   <p><a name="index-auto_002dsave_002dlist_002dfile_002dprefix-1087"></a>  Emacs records information about interrupted sessions in files named
<samp><span class="file">.saves-</span><var>pid</var><span class="file">-</span><var>hostname</var></samp> in the directory
<samp><span class="file">~/.emacs.d/auto-save-list/</span></samp>.  This directory is determined by
the variable <code>auto-save-list-file-prefix</code>.  If you set
<code>auto-save-list-file-prefix</code> to <code>nil</code>, sessions are not
recorded for recovery.

   </body></html>

