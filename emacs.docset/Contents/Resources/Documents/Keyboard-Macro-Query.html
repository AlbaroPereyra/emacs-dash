<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:webmasters@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<title>Keyboard Macro Query - GNU Emacs Manual</title>
<style type="text/css">
@import url('/style.css');
</style>
<!--
This is the `GNU Emacs Manual',
updated for Emacs version 24.3.

Copyright (C) 1985--1987, 1993--2013 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``The GNU
     Manifesto,'' ``Distribution'' and ``GNU GENERAL PUBLIC LICENSE,''
     with the Front-Cover texts being ``A GNU Manual,'' and with the
     Back-Cover Texts as in (a) below.  A copy of the license is
     included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
</head>
<body>
<div class="node" style="background-color:#DDDDFF">
<a name="Keyboard-Macro-Query"></a>
<p>
Next:&nbsp;<a rel="next" accesskey="n" href="Save-Keyboard-Macro.html#Save-Keyboard-Macro">Save Keyboard Macro</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Keyboard-Macro-Counter.html#Keyboard-Macro-Counter">Keyboard Macro Counter</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Keyboard-Macros.html#Keyboard-Macros">Keyboard Macros</a>

</div>

<h3 class="section">17.4 Executing Macros with Variations</h3>

<p>In a keyboard macro, you can create an effect similar to that of
<code>query-replace</code>, in that the macro asks you each time around
whether to make a change.

     <dl>
<dt><kbd>C-x q</kbd><dd>When this point is reached during macro execution, ask for confirmation
(<code>kbd-macro-query</code>). 
</dl>

   <p><a name="index-C_002dx-q-960"></a><a name="index-kbd_002dmacro_002dquery-961"></a>  While defining the macro, type <kbd>C-x q</kbd> at the point where you
want the query to occur.  During macro definition, the <kbd>C-x q</kbd>
does nothing, but when you run the macro later, <kbd>C-x q</kbd> asks you
interactively whether to continue.

   <p>The valid responses when <kbd>C-x q</kbd> asks are:

     <dl>
<dt>&lt;SPC&gt; (or <kbd>y</kbd>)<dd>Continue executing the keyboard macro.

     <br><dt>&lt;DEL&gt; (or <kbd>n</kbd>)<dd>Skip the remainder of this repetition of the macro, and start right
away with the next repetition.

     <br><dt>&lt;RET&gt; (or <kbd>q</kbd>)<dd>Skip the remainder of this repetition and cancel further repetitions.

     <br><dt><kbd>C-r</kbd><dd>Enter a recursive editing level, in which you can perform editing
which is not part of the macro.  When you exit the recursive edit
using <kbd>C-M-c</kbd>, you are asked again how to continue with the
keyboard macro.  If you type a &lt;SPC&gt; at this time, the rest of the
macro definition is executed.  It is up to you to leave point and the
text in a state such that the rest of the macro will do what you want. 
</dl>

   <p><kbd>C-u C-x q</kbd>, which is <kbd>C-x q</kbd> with a numeric argument,
performs a completely different function.  It enters a recursive edit
reading input from the keyboard, both when you type it during the
definition of the macro, and when it is executed from the macro.  During
definition, the editing you do inside the recursive edit does not become
part of the macro.  During macro execution, the recursive edit gives you
a chance to do some particularized editing on each repetition. 
See <a href="Recursive-Edit.html#Recursive-Edit">Recursive Edit</a>.

   </body></html>

